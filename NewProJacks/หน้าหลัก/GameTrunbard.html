<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Turn-Based Game</title>
  <style>
    body { font-family: 'Arial', sans-serif; padding: 20px; background: #f2f2f2; }
    .status { margin-bottom: 20px; }
    .log { white-space: pre-wrap; background: #fff; padding: 10px; border: 1px solid #ccc; height: 150px; overflow-y: auto; }
    button { margin: 5px 10px 5px 0; padding: 10px 15px; }
    #winnerMessage { color: green; font-size: 1.5em; margin-top: 20px; }
  </style>
</head>
<body>

  <h1>Turn-Based Game: ME vs AI</h1>

  <div class="status">
    <p><strong>ME</strong> - HP: <span id="meHP">100</span></p>
    <p><strong>AI</strong> - HP: <span id="aiHP">100</span></p>
    <p>‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô: <span id="turnCount">1</span></p>
    <p>‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•‡πÇ‡∏à‡∏°‡∏ï‡∏µ 1: <span id="meAttack1Count">0</span>/5</p>
    <p>‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•‡πÇ‡∏à‡∏°‡∏ï‡∏µ 2: <span id="meAttack2Count">0</span>/5</p>
    <p>‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•‡∏Æ‡∏µ‡∏•: <span id="meHealCount">0</span>/3</p>
  </div>

  <div>
    <button onclick="useSkill(1)">‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏• 1 (‡πÇ‡∏à‡∏°‡∏ï‡∏µ 15 DMG)</button>
    <button onclick="useSkill(2)">‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏• 2 (‡πÇ‡∏à‡∏°‡∏ï‡∏µ 20 DMG)</button>
    <button onclick="useSkill(3)">‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏• 3 (‡∏Æ‡∏µ‡∏• +20 HP)</button>
    <button onclick="resetGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
  </div>

  <h3>Log:</h3>
  <div class="log" id="log"></div>

  <h2 id="winnerMessage"></h2>

  <script>
    let meHP = 100;
    let aiHP = 100;
    let turnCount = 1;
    let playerTurn = 'ME';
    let meUsed = false;
    let aiUsed = false;

    // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•
    let meAttack1Count = 0;
    let meAttack2Count = 0;
    let meHealCount = 0;

    const maxAttack1Count = 5;  // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•‡πÇ‡∏à‡∏°‡∏ï‡∏µ 1
    const maxAttack2Count = 5;  // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•‡πÇ‡∏à‡∏°‡∏ï‡∏µ 2
    const maxHealCount = 3;     // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•‡∏Æ‡∏µ‡∏•

    const meSkills = {
      1: 15,  // ‡πÇ‡∏à‡∏°‡∏ï‡∏µ 1
      2: 20,  // ‡πÇ‡∏à‡∏°‡∏ï‡∏µ 2
      3: -20  // ‡∏Æ‡∏µ‡∏•
    };

    const aiSkills = {
      1: 15,
      2: 20,
      3: -20
    };

    function useSkill(skillNum) {
      if (playerTurn !== 'ME') return;

      if (skillNum === 1) {
        if (meAttack1Count >= maxAttack1Count) {
          log("‚ùå ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•‡πÇ‡∏à‡∏°‡∏ï‡∏µ 1 ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!");
          return;
        }
      } else if (skillNum === 2) {
        if (meAttack2Count >= maxAttack2Count) {
          log("‚ùå ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•‡πÇ‡∏à‡∏°‡∏ï‡∏µ 2 ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!");
          return;
        }
      } else if (skillNum === 3) {
        if (meHealCount >= maxHealCount) {
          log("‚ùå ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏•‡∏Æ‡∏µ‡∏•‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!");
          return;
        }
      }

      const effect = meSkills[skillNum];

      if (effect < 0) {
        meHP -= effect;
        meHP = Math.min(meHP, 100);  // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏ô 100 HP
        log(`üü¢ ME ‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏• ${skillNum} ‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π ${-effect} HP`);
        meHealCount++;
        document.getElementById('meHealCount').innerText = meHealCount;
      } else {
        aiHP -= effect;
        aiHP = Math.max(aiHP, 0);
        log(`üî¥ ME ‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏• ${skillNum} ‡πÇ‡∏à‡∏°‡∏ï‡∏µ AI ‡πÑ‡∏î‡πâ ${effect} DMG`);
        if (skillNum === 1) {
          meAttack1Count++;
          document.getElementById('meAttack1Count').innerText = meAttack1Count;
        } else if (skillNum === 2) {
          meAttack2Count++;
          document.getElementById('meAttack2Count').innerText = meAttack2Count;
        }
      }

      updateHP();
      meUsed = true;
      playerTurn = 'AI';

      setTimeout(aiTurn, 1000);
    }

    function aiTurn() {
      if (aiHP <= 0 || meHP <= 0) return;

      const skillNum = Math.floor(Math.random() * 3) + 1;
      const effect = aiSkills[skillNum];

      if (effect < 0) {
        aiHP -= effect;
        aiHP = Math.min(aiHP, 100);
        log(`üü¢ AI ‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏• ${skillNum} ‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π ${-effect} HP`);
      } else {
        meHP -= effect;
        meHP = Math.max(meHP, 0);
        log(`üî¥ AI ‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏¥‡∏• ${skillNum} ‡πÇ‡∏à‡∏°‡∏ï‡∏µ ME ‡πÑ‡∏î‡πâ ${effect} DMG`);
      }

      updateHP();
      aiUsed = true;
      playerTurn = 'ME';

      if (meUsed && aiUsed) {
        turnCount++;
        meUsed = false;
        aiUsed = false;
        document.getElementById('turnCount').innerText = turnCount;
        log(`--- ‡∏à‡∏ö‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô ${turnCount - 1} ---`);
      }

      checkGameOver();
    }

    function updateHP() {
      document.getElementById('meHP').innerText = meHP;
      document.getElementById('aiHP').innerText = aiHP;
    }

    function log(message) {
      const logBox = document.getElementById('log');
      logBox.textContent += message + '\n';
      logBox.scrollTop = logBox.scrollHeight;
    }

    function checkGameOver() {
      if (meHP <= 0 || aiHP <= 0) {
        const winner = meHP <= 0 ? 'AI' : 'ME';
        log(`üéâ ‡πÄ‡∏Å‡∏°‡∏à‡∏ö! ‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞‡∏Ñ‡∏∑‡∏≠: ${winner}`);
        document.getElementById('winnerMessage').innerText = `üéâ ‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞‡∏Ñ‡∏∑‡∏≠: ${winner} üéâ`;
        document.querySelectorAll('button').forEach(btn => btn.disabled = true);
      }
    }

    function resetGame() {
      meHP = 100;
      aiHP = 100;
      turnCount = 1;
      playerTurn = 'ME';
      meUsed = false;
      aiUsed = false;

      meAttack1Count = 0;
      meAttack2Count = 0;
      meHealCount = 0;

      document.getElementById('meHP').innerText = meHP;
      document.getElementById('aiHP').innerText = aiHP;
      document.getElementById('turnCount').innerText = turnCount;
      document.getElementById('meAttack1Count').innerText = meAttack1Count;
      document.getElementById('meAttack2Count').innerText = meAttack2Count;
      document.getElementById('meHealCount').innerText = meHealCount;
      document.getElementById('winnerMessage').innerText = '';
      document.querySelectorAll('button').forEach(btn => btn.disabled = false);
      document.getElementById('log').textContent = '';  // Clear log
    }
  </script>

</body>
</html>
